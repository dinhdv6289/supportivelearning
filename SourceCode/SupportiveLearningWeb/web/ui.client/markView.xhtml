<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core"
                template="../templates/ui.xhtml">
    <ui:define name="title"> Mark View</ui:define>
    <ui:define name="content">
        <!-- News Block Starts Here -->
        <div class="content-block">
            <div class="content-block-top"></div>
            <div class="content-block-bottom">
                <h4>Mark view</h4>
                <h:panelGroup rendered="#{studentWorkBean.panelGroupFormMarkView}">
                    <h:form prependId="false">
                        <p:fieldset legend="Mark view"
                                    toggleable="true"
                                    toggleSpeed="500">
                            <h:panelGrid columns="5" cellpadding="4"  style="height: 70px;">
                                <p:messages/>
                                <h:outputLabel for="rollNumber" value="Roll number" />
                                <p:inputText id="rollNumber" value="#{studentWorkBean.student.rollNumber}"
                                             required="true"
                                             requiredMessage="RollNumber must format: Axxxxx . Example : A03829">
                                    <!--                                    <f:validateRegex pattern="[A][a]{0-9}" />-->
                                </p:inputText>
                                <p:message for="rollNumber"/>
                                <h:outputLabel value="Example: A03829"/>
                                <p:commandButton ajax="false"
                                                 value="Search"
                                                 action="#{studentWorkBean.loadMarks}"
                                                 update="tbl">
                                </p:commandButton>
                            </h:panelGrid>
                        </p:fieldset>
                        <br/>
                    </h:form>
                </h:panelGroup>
                <h:panelGroup rendered="#{studentWorkBean.panelGroupFormDisplayResult}">
                    <h:form prependId="false">
                        <p:commandLink ajax="false" value="Back To mark view" action="markView.jsf">
                            <f:setPropertyActionListener target="#{studentWorkBean.panelGroupFormDisplayResult}"
                                                         value="#{false}"/>
                            <f:setPropertyActionListener target="#{studentWorkBean.panelGroupFormMarkView}"
                                                         value="#{true}"/>
                        </p:commandLink>
                        <br/>
                        <br/>
                        <p:fieldset legend="Result Learning of Student"
                                    toggleable="true"
                                    toggleSpeed="500">
                            <p:dataTable id="tbl"
                                         var="markItem"
                                         value="#{studentWorkBean.listMarks}"
                                         emptyMessage="Not have Student."
                                         paginator="true"
                                         rows="10">
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Student Name" />
                                    </f:facet>
                                    <h:outputText value="#{markItem.student.name}" />
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="RollNumer" />
                                    </f:facet>
                                    <h:outputText value="#{markItem.student.rollNumber}" />
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Subject" />
                                    </f:facet>
                                    <h:outputText value="#{markItem.assignment.subject.name}" />
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Assignment Name" />
                                    </f:facet>
                                    <h:outputText value="#{markItem.assignment.name}" />
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Mark"/>
                                    </f:facet>
                                    <h:outputText value="#{markItem.mark}" />
                                </p:column>
                                <p:column>
                                    <f:facet name="header">
                                        <h:outputText value="Date upload"/>
                                    </f:facet>
                                    <h:outputText value="#{markItem.dateUpload}" >
                                        <f:convertDateTime pattern="MM/dd/yyyy"/>
                                    </h:outputText>
                                </p:column>
                            </p:dataTable>
                            <br />

                            <h:panelGrid columns="1">
                                <p:panel header="Export All Data">
                                    <h:commandLink>
                                        <p:graphicImage value="/images/excel.png" />
                                        <p:dataExporter type="xls" target="tbl" fileName="listMarks"  />
                                    </h:commandLink>

                                    <h:commandLink>
                                        <p:graphicImage value="/images/pdf.png" />
                                        <p:dataExporter type="pdf" target="tbl" fileName="listMarks"/>
                                    </h:commandLink>
                                </p:panel>

                            </h:panelGrid>
                        </p:fieldset>
                    </h:form>
                </h:panelGroup>
            </div>
        </div>
        <!-- News Block Ends Here -->

    </ui:define>
</ui:composition>


