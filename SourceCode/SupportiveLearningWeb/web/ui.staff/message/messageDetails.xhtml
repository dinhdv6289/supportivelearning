<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.prime.com.tr/ui"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
    <h:form id="form_message_details">
        <p:fieldset legend="Message: #{feedBackAnswerManagerBean.currentStaff.name} &lt;-------&gt; #{feedBackAnswerManagerBean.selectedFeedBack.student.name}"
                    toggleable="true"
                    toggleSpeed="500" >
            <p:dataList id="data_list_listFeedBackForStudent"
                        var="item"
                        value="#{feedBackAnswerManagerBean.listFeedbackForStudent}"
                        paginator="true" rows="5" effectSpeed="fast"
                        paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"
                        rowsPerPageTemplate="5,10,15"
                        style="width: 100px">

                <p:column>
                    <p:commandButton rendered="#{item.id > 0}"
                                     ajax="false"
                                     action="#{feedBackAnswerManagerBean.onRequestpanelAnswer(true)}"
                                     value="Answer" >
                        <f:setPropertyActionListener target="#{feedBackAnswerManagerBean.selectedFeedBack}"
                                                     value="#{item}">
                        </f:setPropertyActionListener>
                    </p:commandButton>
                    <p:commandButton rendered="#{item.id > 0}"
                                     ajax="false"
                                     action="#{feedBackAnswerManagerBean.onRequestPanelViewDetails(true)}"
                                     value="View Details" >
                        <f:setPropertyActionListener target="#{feedBackAnswerManagerBean.selectedFeedBack}"
                                                     value="#{item}">
                        </f:setPropertyActionListener>
                    </p:commandButton>
                    <h:outputText value="#{item.feedBackContent}" style="margin-left:10px" />
                </p:column>
            </p:dataList>

        </p:fieldset>

        <h:panelGroup rendered="#{feedBackAnswerManagerBean.panelViewDetails}" >
            <br/>
            <p:fieldset  legend="Answers"
                         toggleable="true"
                         toggleSpeed="500">
                <p:dataList id="data_list_FeedbackAnswer"
                            var="item"
                            value="#{feedBackAnswerManagerBean.listFeedBackAnswers}"
                            paginator="true" rows="5" effectSpeed="fast"
                            paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"
                            rowsPerPageTemplate="5,10,15">

                    <p:column>
                        <h:outputText value="#{item.feedBackAnswer}" style="margin-left:10px" />
                    </p:column>
                </p:dataList>
            </p:fieldset>
        </h:panelGroup>
        <h:panelGroup rendered="#{feedBackAnswerManagerBean.panelAnswer}" id="panelAnswer" >
            <br/>
            <p:fieldset  legend="Form Answer"
                         toggleable="true"
                         toggleSpeed="500">
                <p:messages/>
                <h:panelGrid id="display" columns="2" cellpadding="9" cellspacing="9">
                    <h:outputLabel for="feedBackAnswer" value="Content:"></h:outputLabel>
                    <p:inputTextarea id="feedBackAnswer"
                                     value="#{feedBackAnswerManagerBean.feedBackAnswer.feedBackAnswer}"
                                     style="width:300px;height:100px;"
                                     effectDuration="400"
                                     required="true"
                                     requiredMessage="Answer is not null.">
                    </p:inputTextarea>
                    <p:commandButton ajax="false"
                                     value="Send"
                                     action="#{feedBackAnswerManagerBean.insertFeedBackAnswer}"
                                     update="data_list_FeedbackAnswer">
                    </p:commandButton>
                </h:panelGrid>
            </p:fieldset>
        </h:panelGroup>
    </h:form>
</ui:composition>